/*! qlite v. 0.0.0 2015-09-10 */
(function(){var a;a={"private":{delay:function(a){return setTimeout(a,0)}},isPromise:function(a){return null!=(null!=a?a.then:void 0)&&"function"==typeof a.then},defer:function(){var b;return b={"private":{chaineds:[],settleChained:function(a,b){return function(){return a.deferred[b.with_operation](b.with_argument)}},settle:function(b){var c,d,e,f,g,h,i,j,k,l;for(k=this.chaineds,l=[],i=0,j=k.length;j>i;i++){g=k[i];try{switch(b.with_operation){case"resolve":e=g.resolve_callback;break;case"reject":e=g.reject_callback}null!=e?(f=e(b.with_argument),a.isPromise(f)?(c=this.settleChained(g,{with_operation:b.with_operation,with_argument:f}),d=this.settleChained(g,{with_operation:"reject",with_argument:f}),l.push(f.then(c,d))):l.push(this.settleChained(g,{with_operation:b.with_operation,with_argument:f})())):l.push(void 0)}catch(m){h=m,l.push(this.settleChained(g,{with_operation:"reject",with_argument:h})())}}return l}},resolve:function(b){var c;return this.promise.settled?void 0:(this.promise.settled=!0,c=this,a["private"].delay(function(){return c["private"].settle({with_operation:"resolve",with_argument:b})}))},reject:function(b){var c;return this.promise.settled?void 0:(this.promise.settled=!0,c=this,a["private"].delay(function(){return c["private"].settle({with_operation:"reject",with_argument:b})}))},promise:{settled:!1,then:function(c,d){var e;return e={deferred:a.defer()},null!=c&&(e.resolve_callback=c),e.reject_callback=null!=d?d:function(a){return a},b["private"].chaineds.push(e),e.deferred.promise},fail:function(a){return this.then(void 0,a)},fin:function(a){return this.then(a,a)}}}},all:function(b){var c,d,e,f,g,h,i,j;for(c=a.defer(),e={values:[],fulfilled:0},h=function(a,d){var f;return e.fulfilled++,f=b.indexOf(a),e.values[f]=d,e.fulfilled===b.length?c.resolve(e.values):void 0},i=function(a){return c.reject(a)},d=function(a){return a.then(function(b){return h(a,b)},i)},f=0,g=b.length;g>f;f++)j=b[f],d(j);return c.promise},any:function(b){var c,d,e,f,g,h,i,j;for(c=a.defer(),j=0,g=function(a){return c.resolve(a)},h=function(){return j++,j===b.length?c.reject(void 0):void 0},d=function(a){return a.then(g,h)},e=0,f=b.length;f>e;e++)i=b[e],d(i);return c.promise}},window.QLite=a}).call(this);